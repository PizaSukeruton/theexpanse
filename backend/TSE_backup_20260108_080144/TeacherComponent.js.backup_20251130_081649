import KnowledgeResponseEngine from "./helpers/knowledge-response-engine.js";
import { getNaturalLanguageGenerator } from './helpers/NaturalLanguageGeneratorSingleton.js';

class TeacherComponent {
  constructor() {
    this.nodeId = Math.floor(Math.random() * 256).toString(16).toUpperCase().padStart(2, "0");
    console.log(`[TSE-Teacher] Initialized with node ID: ${this.nodeId}`);

    this.nlg = getNaturalLanguageGenerator();
    this.responseEngine = new KnowledgeResponseEngine();
  }

  async initialize() {
    console.log("[TSE-Teacher] initialize() called — no-op");
    return true;
  }

  // ✅ REQUIRED by TSELoopManager
  getNodeId() {
    return this.nodeId;
  }

  async teach(characterId, query, context) {
    const result = await this.responseEngine.generate(characterId, query, context);
    return result;
  }
}

export default TeacherComponent;
