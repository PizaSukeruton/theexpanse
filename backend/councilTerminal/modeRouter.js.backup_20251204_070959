/**
 * modeRouter.js
 * Detects whether a command is:
 * - normal
 * - god mode (requires level 11)
 * - tanuki mode (requires level 11)
 */

function detectMode(original, accessLevel) {
  const input = original.trim().toLowerCase();

  // Only Admins can use God Mode / Tanuki Mode
  const isAdmin = accessLevel === 11;

  // GOD MODE detection
  const godPrefixes = ["god mode:", "god:"];
  for (const p of godPrefixes) {
    if (input.startsWith(p)) {
      return {
        mode: isAdmin ? "god" : "normal",
        cleanCommand: original.slice(p.length).trim(),
        original,
        prefixUsed: true
      };
    }
  }

  // TANUKI MODE detection
  const tanukiPrefixes = ["tanuki mode:", "tanuki:", "tm:"];
  for (const p of tanukiPrefixes) {
    if (input.startsWith(p)) {
      return {
        mode: isAdmin ? "tanuki" : "normal",
        cleanCommand: original.slice(p.length).trim(),
        original,
        prefixUsed: true
      };
    }
  }

  // DEFAULT â€” normal mode
  return {
    mode: "normal",
    cleanCommand: original,
    original,
    prefixUsed: false
  };
}

export default {
  detectMode
};
